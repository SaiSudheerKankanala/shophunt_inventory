<script>
    // Use current domain - FIXED
    const API_BASE = window.location.origin;
    
    console.log("API Base URL:", API_BASE);

    async function addInventory() {
        const data = {
            shop_name: document.getElementById('shopName').value,
            shop_owner: document.getElementById('shopOwner').value,
            shop_address: document.getElementById('shopAddress').value,
            product_name: document.getElementById('productName').value,
            product_brand: document.getElementById('productBrand').value,
            product_mrp: parseFloat(document.getElementById('productMrp').value) || 0,
            product_size: document.getElementById('productSize').value,
            quantity: parseInt(document.getElementById('quantity').value) || 0,
            selling_price: parseFloat(document.getElementById('sellingPrice').value) || 0,
            manufacture_date: document.getElementById('manufactureDate').value,
            expiry_date: document.getElementById('expiryDate').value,
            stock_status: document.getElementById('stockStatus').value,
            is_available: document.getElementById('isAvailable').value === 'true'
        };

        console.log("Sending data:", data);
        await postData('/api/inventory/add', data, 'addResponse');
        getAllInventory();
    }

    // Add error handling to getAllInventory
    async function getAllInventory() {
        try {
            console.log("Fetching inventory from:", API_BASE + '/api/inventory/all');
            const response = await fetch(API_BASE + '/api/inventory/all');
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const result = await response.json();
            console.log("Inventory data received:", result);

            if (result.data && result.data.length > 0) {
                displayInventoryData(result.data);
            } else {
                document.getElementById('inventoryData').innerHTML = '<p>No inventory data found.</p>';
            }
        } catch (error) {
            console.error('Error loading inventory:', error);
            document.getElementById('inventoryData').innerHTML = 
                '<div class="error">Error loading data: ' + error.message + '</div>';
        }
    }

    // Your other JavaScript functions remain the same...
</script>
